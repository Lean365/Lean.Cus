# Lean.Cus - ä¼ä¸šçº§å¿«é€Ÿå¼€å‘æ¡†æ¶

## ğŸ“– ç›®å½•

- [é¡¹ç›®ä»‹ç»](#-é¡¹ç›®ä»‹ç»)
- [ç‰¹è‰²åŠŸèƒ½](#-ç‰¹è‰²åŠŸèƒ½)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ç‰ˆæœ¬æ—¥å¿—](#-ç‰ˆæœ¬æ—¥å¿—)
- [æœ€ä½³å®è·µ](#-æœ€ä½³å®è·µ)
- [å¸¸è§é—®é¢˜](#-å¸¸è§é—®é¢˜)
- [è´¡çŒ®è€…](#-è´¡çŒ®è€…)
- [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
- [è”ç³»æˆ‘ä»¬](#-è”ç³»æˆ‘ä»¬)
- [è®¸å¯è¯](#-è®¸å¯è¯)

## ğŸ“– é¡¹ç›®ä»‹ç»

### é¡¹ç›®èƒŒæ™¯
Lean.Cus æ˜¯ä¸€ä¸ªåŸºäº .NET 8 + Vue 3 çš„ç°ä»£åŒ–ä¼ä¸šçº§å¿«é€Ÿå¼€å‘æ¡†æ¶ã€‚å®ƒé‡‡ç”¨æœ€æ–°çš„æŠ€æœ¯æ ˆ,éµå¾ª DDD (é¢†åŸŸé©±åŠ¨è®¾è®¡)æ¶æ„,æ—¨åœ¨å¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ„å»ºé«˜è´¨é‡çš„ä¼ä¸šåº”ç”¨ã€‚

### é¡¹ç›®ç›®æ ‡
- æä¾›å®Œæ•´çš„ä¼ä¸šåº”ç”¨å¼€å‘è§£å†³æ–¹æ¡ˆ
- å®ç°å¿«é€Ÿå¼€å‘å’Œè½»æ¾ç»´æŠ¤
- ç¡®ä¿ç³»ç»Ÿå®‰å…¨æ€§å’Œå¯æ‰©å±•æ€§
- æ”¯æŒå¤šè¯­è¨€å’Œå¤šç»ˆç«¯

### æ ¸å¿ƒç‰¹è‰²
- å®Œæ•´çš„ DDD åˆ†å±‚æ¶æ„
- å¼ºå¤§çš„ä»£ç ç”Ÿæˆèƒ½åŠ›
- çµæ´»çš„æƒé™æ§åˆ¶ç³»ç»Ÿ
- ä¸°å¯Œçš„å¼€å‘ç»„ä»¶
- å®Œå–„çš„å¼€å‘æ–‡æ¡£

### åº”ç”¨åœºæ™¯
- ä¼ä¸šç®¡ç†ç³»ç»Ÿ
- ä¸šåŠ¡å¤„ç†å¹³å°
- æ•°æ®åˆ†æç³»ç»Ÿ
- å·¥ä½œæµç³»ç»Ÿ

## ğŸŒŸ ç‰¹è‰²åŠŸèƒ½

### æŠ€æœ¯åˆ›æ–°
- åŸºäº SqlSugar ORM çš„é«˜æ€§èƒ½æ•°æ®è®¿é—®
- åŸºäº SignalR çš„å®æ—¶é€šä¿¡
- åŸºäº Vue 3 + TypeScript çš„ç°ä»£åŒ–å‰ç«¯
- åŸºäº Ant Design Vue çš„ä¸“ä¸š UI

### åŠŸèƒ½äº®ç‚¹
- å¤šç§Ÿæˆ·æ”¯æŒ
- å¤šè¯­è¨€æ”¯æŒ
- æ•°æ®æƒé™æ§åˆ¶
- å·¥ä½œæµå¼•æ“
- æŠ¥è¡¨è®¾è®¡å™¨
- ä»£ç ç”Ÿæˆå™¨

### æ€§èƒ½ä¼˜åŠ¿
- é«˜æ€§èƒ½ ORM
- åˆ†å¸ƒå¼ç¼“å­˜
- å¼‚æ­¥å¤„ç†
- æŒ‰éœ€åŠ è½½

## ğŸ“š å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- .NET 8.0 SDK
- Node.js 18+
- SQL Server/MySQL/PostgreSQL
- Redis (å¯é€‰)
- Visual Studio 2022/VS Code

### å¼€å‘ç¯å¢ƒè®¾ç½®
1. å…‹éš†ä»“åº“
```bash
git clone https://github.com/Lean365/Lean.Cus.git
cd Lean.Cus
```

2. åç«¯é…ç½®
```bash
cd Backend/src/Lean.Cus.Api
dotnet restore
```

3. å‰ç«¯é…ç½®
```bash
cd Frontend/src/Lean.Cus.Antd
pnpm install
```

### å¯åŠ¨è¿è¡Œ
1. å¯åŠ¨åç«¯
```bash
cd Backend/src/Lean.Cus.Api
dotnet run
```

2. å¯åŠ¨å‰ç«¯
```bash
cd Frontend/src/Lean.Cus.Antd
pnpm dev
```

## ğŸ“‹ ç‰ˆæœ¬æ—¥å¿—

### v1.0.0 (2024-01)
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- å®Œæ•´çš„ DDD æ¶æ„å®ç°
- åŸºç¡€åŠŸèƒ½æ¨¡å—å®Œæˆ
- å¤šè¯­è¨€æ”¯æŒ

### v1.1.0 (è®¡åˆ’ä¸­)
- å·¥ä½œæµå¼•æ“
- æŠ¥è¡¨è®¾è®¡å™¨
- ç§»åŠ¨ç«¯é€‚é…
- æ€§èƒ½ä¼˜åŒ–

## ğŸ’¡ æœ€ä½³å®è·µ

### å¼€å‘å»ºè®®
- éµå¾ª DDD è®¾è®¡åŸåˆ™
- ä½¿ç”¨ä»£ç ç”Ÿæˆå™¨
- ç¼–å†™å•å…ƒæµ‹è¯•
- è§„èŒƒä»£ç é£æ ¼

### æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨ç¼“å­˜
- å¼‚æ­¥å¤„ç†
- ä»£ç å‹ç¼©
- æ‡’åŠ è½½

### å®‰å…¨åŠ å›º
- å‚æ•°éªŒè¯
- SQLæ³¨å…¥é˜²æŠ¤
- XSSé˜²æŠ¤
- CSRFé˜²æŠ¤

### éƒ¨ç½²æŒ‡å—
- ç¯å¢ƒé…ç½®
- æ•°æ®åº“éƒ¨ç½²
- æœåŠ¡å™¨è®¾ç½®
- è´Ÿè½½å‡è¡¡

## â“ å¸¸è§é—®é¢˜

### å®‰è£…é—®é¢˜
Q: å¦‚ä½•è§£å†³ä¾èµ–å®‰è£…å¤±è´¥ï¼Ÿ
A: æ£€æŸ¥ç½‘ç»œè¿æ¥,ä½¿ç”¨å›½å†…é•œåƒæº

### é…ç½®é—®é¢˜
Q: å¦‚ä½•é…ç½®æ•°æ®åº“è¿æ¥ï¼Ÿ
A: ä¿®æ”¹ appsettings.json ä¸­çš„è¿æ¥å­—ç¬¦ä¸²

### è¿è¡Œé—®é¢˜
Q: å¦‚ä½•å¤„ç†è·¨åŸŸé—®é¢˜ï¼Ÿ
A: é…ç½® CORS ä¸­é—´ä»¶

### æ€§èƒ½é—®é¢˜
Q: å¦‚ä½•æé«˜æŸ¥è¯¢æ€§èƒ½ï¼Ÿ
A: ä½¿ç”¨ç¼“å­˜,ä¼˜åŒ–ç´¢å¼•,ç¼–å†™é«˜æ•ˆæŸ¥è¯¢

## ğŸ‘¥ è´¡çŒ®è€…

### æ ¸å¿ƒå›¢é˜Ÿ
- [Lean365](https://github.com/Lean365) - é¡¹ç›®è´Ÿè´£äºº
- æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„å¼€å‘å›¢é˜Ÿï¼

### è´¡çŒ®æ–¹å¼
1. Fork é¡¹ç›®
2. åˆ›å»ºæ–°åˆ†æ”¯
3. æäº¤ä»£ç 
4. å‘èµ· Pull Request

## ğŸ”§ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **.NET 8.0**: æœ€æ–°çš„ .NET å¼€å‘å¹³å°
- **SqlSugar ORM**: é«˜æ€§èƒ½ ORMï¼Œæ”¯æŒå¤šç§æ•°æ®åº“
- **Redis**: åˆ†å¸ƒå¼ç¼“å­˜
- **SignalR**: å®æ—¶é€šä¿¡
- **Quartz.NET**: ä»»åŠ¡è°ƒåº¦

### å‰ç«¯æŠ€æœ¯
- **Vue 3**: æ¸è¿›å¼ JavaScript æ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨çš„ JavaScript
- **Ant Design Vue**: UI ç»„ä»¶åº“
- **Vite**: ç°ä»£æ„å»ºå·¥å…·

## ğŸ“ è”ç³»æˆ‘ä»¬

- å®˜ç½‘ï¼š[https://lean365.com](https://lean365.com)
- é‚®ç®±ï¼šsupport@lean365.com
- QQç¾¤ï¼š123456789

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE)

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [SqlSugar ORM å¼€å‘è§„èŒƒ](./docs/LeanSqlSugar.md)
- [Windows Forms å®¢æˆ·ç«¯å¼€å‘è§„èŒƒ](./docs/LeanWinForms.md)
- [å‰ç«¯å¼€å‘è§„èŒƒ](./docs/LeanFrontend.md)
- [API æ¥å£æ–‡æ¡£](./docs/LeanAPI.md)
- [éƒ¨ç½²æŒ‡å—](./docs/LeanDeploy.md)

## ğŸ“š é¡¹ç›®æˆªå›¾

### åå°ç®¡ç†
![åå°ç®¡ç†](./docs/images/admin.png)

### æ•°æ®åˆ†æ
![æ•°æ®åˆ†æ](./docs/images/analysis.png)

### å·¥ä½œæµ
![å·¥ä½œæµ](./docs/images/workflow.png)

## ğŸ“ å¼€å‘è§„èŒƒ

### ç›®å½•
- [é€šç”¨è§„èŒƒ](#é€šç”¨è§„èŒƒ)
  - [æ–‡ä»¶å¤´è§„èŒƒ](#æ–‡ä»¶å¤´è§„èŒƒ)
  - [æ³¨é‡Šè§„èŒƒ](#æ³¨é‡Šè§„èŒƒ)
  - [ä»£ç æäº¤è§„èŒƒ](#ä»£ç æäº¤è§„èŒƒ)
  - [åˆ†æ”¯ç®¡ç†è§„èŒƒ](#åˆ†æ”¯ç®¡ç†è§„èŒƒ)
  - [æ–‡æ¡£ç¼–å†™è§„èŒƒ](#æ–‡æ¡£ç¼–å†™è§„èŒƒ)

- [æ¶æ„è§„èŒƒ](#æ¶æ„è§„èŒƒ)
  - [DDDåˆ†å±‚è§„èŒƒ](#DDDåˆ†å±‚è§„èŒƒ)
  - [é¡¹ç›®ç»“æ„è§„èŒƒ](#é¡¹ç›®ç»“æ„è§„èŒƒ)
  - [ä¾èµ–æ³¨å…¥è§„èŒƒ](#ä¾èµ–æ³¨å…¥è§„èŒƒ)

- [åç«¯å¼€å‘è§„èŒƒ](#åç«¯å¼€å‘è§„èŒƒ)
  - [ä»£ç è§„èŒƒ](#åç«¯ä»£ç è§„èŒƒ)
  - [æ¥å£è®¾è®¡è§„èŒƒ](#æ¥å£è®¾è®¡è§„èŒƒ)
  - [æ•°æ®åº“è®¾è®¡è§„èŒƒ](#æ•°æ®åº“è®¾è®¡è§„èŒƒ)
  - [ç¼“å­˜ä½¿ç”¨è§„èŒƒ](#ç¼“å­˜ä½¿ç”¨è§„èŒƒ)
  - [å¼‚å¸¸å¤„ç†è§„èŒƒ](#å¼‚å¸¸å¤„ç†è§„èŒƒ)
  - [æ—¥å¿—è§„èŒƒ](#æ—¥å¿—è§„èŒƒ)
  - [å•å…ƒæµ‹è¯•è§„èŒƒ](#å•å…ƒæµ‹è¯•è§„èŒƒ)

- [å‰ç«¯å¼€å‘è§„èŒƒ](#å‰ç«¯å¼€å‘è§„èŒƒ)
  - [ä»£ç è§„èŒƒ](#å‰ç«¯ä»£ç è§„èŒƒ)
  - [ç»„ä»¶å¼€å‘è§„èŒƒ](#ç»„ä»¶å¼€å‘è§„èŒƒ)
  - [çŠ¶æ€ç®¡ç†è§„èŒƒ](#çŠ¶æ€ç®¡ç†è§„èŒƒ)
  - [è·¯ç”±ç®¡ç†è§„èŒƒ](#è·¯ç”±ç®¡ç†è§„èŒƒ)
  - [UI/UXè®¾è®¡è§„èŒƒ](#UI/UXè®¾è®¡è§„èŒƒ)
  - [æ€§èƒ½ä¼˜åŒ–è§„èŒƒ](#å‰ç«¯æ€§èƒ½ä¼˜åŒ–è§„èŒƒ)
  - [å®‰å…¨è§„èŒƒ](#å‰ç«¯å®‰å…¨è§„èŒƒ)

- [å·¥ç¨‹åŒ–è§„èŒƒ](#å·¥ç¨‹åŒ–è§„èŒƒ)
  - [CI/CDè§„èŒƒ](#CI/CDè§„èŒƒ)
  - [ç¯å¢ƒç®¡ç†è§„èŒƒ](#ç¯å¢ƒç®¡ç†è§„èŒƒ)
  - [ç‰ˆæœ¬å‘å¸ƒè§„èŒƒ](#ç‰ˆæœ¬å‘å¸ƒè§„èŒƒ)
  - [ç›‘æ§å‘Šè­¦è§„èŒƒ](#ç›‘æ§å‘Šè­¦è§„èŒƒ)

### é€šç”¨è§„èŒƒ

#### æ–‡ä»¶å¤´è§„èŒƒ
- æ‰€æœ‰ä»£ç æ–‡ä»¶ï¼ˆåŒ…æ‹¬å‰ç«¯å’Œåç«¯ï¼‰å¿…é¡»åŒ…å«ç»Ÿä¸€çš„æ–‡ä»¶å¤´æ³¨é‡Š
- æ–‡ä»¶å¤´æ³¨é‡Šå¿…é¡»åŒ…å«ä»¥ä¸‹ä¿¡æ¯ï¼š
  - ç‰ˆæƒå£°æ˜
  - æ–‡ä»¶åç§°
  - åŠŸèƒ½æè¿°
  - åˆ›å»ºæ—¶é—´
  - åˆ›å»ºäºº
  - ä¿®æ”¹è®°å½•

ç¤ºä¾‹æ–‡ä»¶å¤´ï¼š
```csharp
//------------------------------------------------------------------------------
// Copyright (c) Lean365 å›¢é˜Ÿ.
// All rights reserved.
//
// æ–‡ä»¶åï¼šxxx.cs/xxx.vue/xxx.ts
// åŠŸèƒ½æè¿°ï¼šç®€è¦æè¿°æœ¬æ–‡ä»¶çš„åŠŸèƒ½
//
// åˆ›å»ºæ—¶é—´ï¼š2024-01-01
// åˆ›å»ºäººï¼šLean365
// 
// ä¿®æ”¹è®°å½•ï¼š
// æ—¶é—´ï¼š2024-01-01 ä¿®æ”¹äººï¼šLean365 ä¿®æ”¹è¯´æ˜ï¼šåˆ›å»ºæ–‡ä»¶
//------------------------------------------------------------------------------
```

#### æ³¨é‡Šè§„èŒƒ
1. ç±»æ³¨é‡Š
```csharp
/// <summary>
/// ç±»çš„åŠŸèƒ½æè¿°
/// </summary>
/// <remarks>
/// è¯¦ç»†è¯´æ˜ï¼ŒåŒ…æ‹¬ä½¿ç”¨åœºæ™¯ã€æ³¨æ„äº‹é¡¹ç­‰
/// </remarks>
```

2. æ–¹æ³•æ³¨é‡Š
```csharp
/// <summary>
/// æ–¹æ³•çš„åŠŸèƒ½æè¿°
/// </summary>
/// <param name="å‚æ•°å">å‚æ•°è¯´æ˜</param>
/// <returns>è¿”å›å€¼è¯´æ˜</returns>
/// <exception cref="å¼‚å¸¸ç±»å‹">å¯èƒ½æŠ›å‡ºçš„å¼‚å¸¸è¯´æ˜</exception>
```

3. å±æ€§æ³¨é‡Š
```csharp
/// <summary>
/// å±æ€§è¯´æ˜
/// </summary>
/// <remarks>
/// è¡¥å……è¯´æ˜ï¼ˆå¦‚æœéœ€è¦ï¼‰
/// </remarks>
```

4. ä»£ç é€»è¾‘æ³¨é‡Š
```typescript
// é‡è¦çš„ä¸šåŠ¡é€»è¾‘å¿…é¡»æ·»åŠ æ³¨é‡Š
// å¤æ‚çš„ç®—æ³•å¿…é¡»è¯´æ˜å…¶æ€è·¯
// ç‰¹æ®Šå¤„ç†å¿…é¡»æ³¨æ˜åŸå› 
```

5. TODOæ³¨é‡Š
```typescript
// TODO: å¾…å®Œæˆçš„åŠŸèƒ½
// FIXME: å¾…ä¿®å¤çš„é—®é¢˜
// NOTE: éœ€è¦æ³¨æ„çš„äº‹é¡¹
```

#### ä»£ç æäº¤è§„èŒƒ
- æäº¤ä¿¡æ¯å¿…é¡»ç¬¦åˆä»¥ä¸‹æ ¼å¼ï¼š
```bash
<type>(<scope>): <subject>

<body>

<footer>
```

- typeç±»å‹ï¼š
  - feat: æ–°åŠŸèƒ½
  - fix: ä¿®å¤bug
  - docs: æ–‡æ¡£ä¿®æ”¹
  - style: ä»£ç æ ¼å¼ä¿®æ”¹
  - refactor: é‡æ„ä»£ç 
  - test: æµ‹è¯•ç”¨ä¾‹ä¿®æ”¹
  - chore: å…¶ä»–ä¿®æ”¹

- scopeï¼šå½±å“èŒƒå›´
  - åç«¯ï¼šapi, service, entityç­‰
  - å‰ç«¯ï¼šcomponent, page, storeç­‰

- subjectï¼šç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡50ä¸ªå­—ç¬¦
- bodyï¼šè¯¦ç»†æè¿°
- footerï¼šå…³è”issueç­‰ä¿¡æ¯

ç¤ºä¾‹ï¼š
```bash
feat(user): æ·»åŠ ç”¨æˆ·ç®¡ç†åŠŸèƒ½

1. å®ç°ç”¨æˆ·CRUDæ¥å£
2. æ·»åŠ ç”¨æˆ·æƒé™éªŒè¯
3. å®Œå–„ç”¨æˆ·ç®¡ç†é¡µé¢

Closes #123
```

#### åˆ†æ”¯ç®¡ç†è§„èŒƒ
- åˆ†æ”¯å‘½åè§„èŒƒï¼š
  - ä¸»åˆ†æ”¯ï¼šmaster/main
  - å¼€å‘åˆ†æ”¯ï¼šdevelop
  - åŠŸèƒ½åˆ†æ”¯ï¼šfeature/xxx
  - ä¿®å¤åˆ†æ”¯ï¼šhotfix/xxx
  - å‘å¸ƒåˆ†æ”¯ï¼šrelease/xxx

- åˆ†æ”¯å·¥ä½œæµï¼š
  1. ä»developåˆ†æ”¯åˆ›å»ºfeatureåˆ†æ”¯
  2. åœ¨featureåˆ†æ”¯å¼€å‘æ–°åŠŸèƒ½
  3. å®Œæˆååˆå¹¶å›developåˆ†æ”¯
  4. å‘å¸ƒæ—¶ä»developåˆ›å»ºreleaseåˆ†æ”¯
  5. æµ‹è¯•é€šè¿‡ååˆå¹¶åˆ°masteråˆ†æ”¯

#### æ–‡æ¡£ç¼–å†™è§„èŒƒ
1. APIæ–‡æ¡£è§„èŒƒ
```yaml
æ¥å£åç§°ï¼šç”¨æˆ·ç™»å½•
æ¥å£åœ°å€ï¼š/api/auth/login
è¯·æ±‚æ–¹å¼ï¼šPOST
æ¥å£æè¿°ï¼šç”¨æˆ·ç™»å½•æ¥å£ï¼Œè¿”å›token

è¯·æ±‚å‚æ•°ï¼š
  - åç§°ï¼šusername
    ç±»å‹ï¼šstring
    å¿…å¡«ï¼šæ˜¯
    æè¿°ï¼šç”¨æˆ·å
    ç¤ºä¾‹ï¼šadmin
    
  - åç§°ï¼špassword
    ç±»å‹ï¼šstring
    å¿…å¡«ï¼šæ˜¯
    æè¿°ï¼šå¯†ç 
    ç¤ºä¾‹ï¼š123456

å“åº”å‚æ•°ï¼š
  - åç§°ï¼štoken
    ç±»å‹ï¼šstring
    æè¿°ï¼šè®¿é—®ä»¤ç‰Œ
    ç¤ºä¾‹ï¼šeyJ0eXAiOiJKV1QiLCJhbGc...

é”™è¯¯ç ï¼š
  - 401ï¼šç”¨æˆ·åæˆ–å¯†ç é”™è¯¯
  - 423ï¼šè´¦å·å·²è¢«é”å®š
```

2. æŠ€æœ¯æ–‡æ¡£è§„èŒƒ
- æ–‡æ¡£ç»“æ„ï¼š
  - æ¦‚è¿°
  - æ¶æ„è®¾è®¡
  - æ ¸å¿ƒåŠŸèƒ½
  - éƒ¨ç½²è¯´æ˜
  - å¼€å‘æŒ‡å—
  - å¸¸è§é—®é¢˜

- æ–‡æ¡£è¦æ±‚ï¼š
  - ä½¿ç”¨Markdownæ ¼å¼
  - åŒ…å«å¿…è¦çš„å›¾è¡¨
  - ä»£ç ç¤ºä¾‹å®Œæ•´
  - æ­¥éª¤æ¸…æ™°æ˜ç¡®
  - å®šæœŸæ›´æ–°ç»´æŠ¤

### æ¶æ„è§„èŒƒ

#### DDDåˆ†å±‚è§„èŒƒ
1. é¢†åŸŸå±‚ï¼ˆDomainï¼‰
- èŒè´£ï¼š
  - å®šä¹‰é¢†åŸŸæ¨¡å‹
  - å®ç°é¢†åŸŸé€»è¾‘
  - å®šä¹‰é¢†åŸŸäº‹ä»¶
  - å®šä¹‰ä»“å‚¨æ¥å£

- è§„èŒƒï¼š
  - ä¸ä¾èµ–å…¶ä»–å±‚
  - å®ä½“ç±»å¿…é¡»ç»§æ‰¿LeanEntity
  - å……è¡€æ¨¡å‹ï¼ŒåŒ…å«ä¸šåŠ¡é€»è¾‘
  - ä½¿ç”¨å€¼å¯¹è±¡è¡¨ç¤ºå±æ€§ç»„åˆ

2. åº”ç”¨å±‚ï¼ˆApplicationï¼‰
- èŒè´£ï¼š
  - å®ç°åº”ç”¨æœåŠ¡
  - å¤„ç†ç”¨ä¾‹æµç¨‹
  - äº‹åŠ¡ç®¡ç†
  - æƒé™éªŒè¯

- è§„èŒƒï¼š
  - ä¾èµ–é¢†åŸŸå±‚
  - ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
  - ä½¿ç”¨DTOè¿›è¡Œæ•°æ®ä¼ è¾“
  - å®ç°CQRSæ¨¡å¼

3. åŸºç¡€è®¾æ–½å±‚ï¼ˆInfrastructureï¼‰
- èŒè´£ï¼š
  - å®ç°ä»“å‚¨æ¥å£
  - å®ç°æŠ€æœ¯ç»†èŠ‚
  - æä¾›åŸºç¡€æœåŠ¡
  - é›†æˆç¬¬ä¸‰æ–¹

- è§„èŒƒï¼š
  - ä¾èµ–é¢†åŸŸå±‚
  - å®ç°æŒä¹…åŒ–
  - æä¾›æŠ€æœ¯å®ç°
  - å¤„ç†å¤–éƒ¨é›†æˆ

4. æ¥å£å±‚ï¼ˆAPIï¼‰
- èŒè´£ï¼š
  - å¤„ç†HTTPè¯·æ±‚
  - å‚æ•°éªŒè¯
  - è¿”å›ç»“æœ
  - å¤„ç†å¼‚å¸¸

- è§„èŒƒï¼š
  - ä¾èµ–åº”ç”¨å±‚
  - ç»Ÿä¸€è¿”å›æ ¼å¼
  - ç»Ÿä¸€å¼‚å¸¸å¤„ç†
  - æ¥å£ç‰ˆæœ¬æ§åˆ¶

5. å…¬å…±å±‚ï¼ˆCommonï¼‰
- èŒè´£ï¼š
  - æä¾›é€šç”¨å·¥å…·ç±»
  - å®šä¹‰å…¬å…±å¸¸é‡
  - æä¾›æ‰©å±•æ–¹æ³•
  - å°è£…ç¬¬ä¸‰æ–¹ç»„ä»¶
  - æä¾›å…¬å…±ä¸­é—´ä»¶
  - å®šä¹‰é€šç”¨æ³¨è§£

- è§„èŒƒï¼š
  - ä¸ä¾èµ–å…¶ä»–å±‚
  - åªåŒ…å«ä¸ä¸šåŠ¡æ— å…³çš„é€šç”¨åŠŸèƒ½
  - éµå¾ªSOLIDåŸåˆ™
  - ç±»åå¿…é¡»å¸¦æœ‰Leanå‰ç¼€
  - å®Œæ•´çš„XMLæ³¨é‡Š
  - å•å…ƒæµ‹è¯•è¦†ç›–ç‡>80%

#### é¡¹ç›®ç»“æ„è§„èŒƒ
```
Backend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ Lean.Cus.Domain/             # é¢†åŸŸå±‚
â”‚   â”‚   â”œâ”€â”€ Entities/                # å®ä½“
â”‚   â”‚   â”œâ”€â”€ Events/                  # é¢†åŸŸäº‹ä»¶
â”‚   â”‚   â”œâ”€â”€ Services/                # é¢†åŸŸæœåŠ¡
â”‚   â”‚   â””â”€â”€ Repositories/            # ä»“å‚¨æ¥å£
â”‚   â”‚
â”‚   â”œâ”€â”€ Lean.Cus.Application/        # åº”ç”¨å±‚
â”‚   â”‚   â”œâ”€â”€ Services/                # åº”ç”¨æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ DTOs/                    # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ Commands/                # å‘½ä»¤
â”‚   â”‚   â””â”€â”€ Queries/                 # æŸ¥è¯¢
â”‚   â”‚
â”‚   â”œâ”€â”€ Lean.Cus.Infrastructure/     # åŸºç¡€è®¾æ–½å±‚
â”‚   â”‚   â”œâ”€â”€ Repositories/            # ä»“å‚¨å®ç°
â”‚   â”‚   â”œâ”€â”€ Database/               # æ•°æ®åº“é…ç½®
â”‚   â”‚   â”œâ”€â”€ Cache/                   # ç¼“å­˜å®ç°
â”‚   â”‚   â”œâ”€â”€ Message/                 # æ¶ˆæ¯å®ç°
â”‚   â”‚   â””â”€â”€ Services/               # ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ
â”‚   â”‚
â”‚   â”œâ”€â”€ Lean.Cus.Common/            # å…¬å…±å±‚
â”‚   â”‚   â”œâ”€â”€ Attributes/             # è‡ªå®šä¹‰ç‰¹æ€§
â”‚   â”‚   â”œâ”€â”€ Caching/               # ç¼“å­˜ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ Configuration/         # é…ç½®ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ Constants/             # å¸¸é‡å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ Converters/           # ç±»å‹è½¬æ¢
â”‚   â”‚   â”œâ”€â”€ Encryption/           # åŠ å¯†è§£å¯†
â”‚   â”‚   â”œâ”€â”€ Enums/                # æšä¸¾å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ Extensions/           # æ‰©å±•æ–¹æ³•
â”‚   â”‚   â”œâ”€â”€ Filters/              # è¿‡æ»¤å™¨
â”‚   â”‚   â”œâ”€â”€ Helpers/              # å¸®åŠ©ç±»
â”‚   â”‚   â”œâ”€â”€ Json/                 # JSONå¤„ç†
â”‚   â”‚   â”œâ”€â”€ Logging/              # æ—¥å¿—ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ Middleware/           # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ Models/               # é€šç”¨æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ Security/             # å®‰å…¨ç›¸å…³
â”‚   â”‚   â”œâ”€â”€ Threading/            # çº¿ç¨‹ç›¸å…³
â”‚   â”‚   â””â”€â”€ Utils/                # å·¥å…·ç±»
â”‚   â”‚
â”‚   â””â”€â”€ Lean.Cus.Api/               # æ¥å£å±‚
â”‚       â”œâ”€â”€ Controllers/             # æ§åˆ¶å™¨
â”‚       â”œâ”€â”€ Filters/                 # è¿‡æ»¤å™¨
â”‚       â”œâ”€â”€ Middlewares/            # ä¸­é—´ä»¶
â”‚       â””â”€â”€ Extensions/             # æ‰©å±•æ–¹æ³•

Frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                        # APIæ¥å£
â”‚   â”œâ”€â”€ assets/                     # é™æ€èµ„æº
â”‚   â”œâ”€â”€ components/                 # ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/                      # é’©å­å‡½æ•°
â”‚   â”œâ”€â”€ layouts/                    # å¸ƒå±€
â”‚   â”œâ”€â”€ router/                     # è·¯ç”±
â”‚   â”œâ”€â”€ store/                      # çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ styles/                     # æ ·å¼
â”‚   â”œâ”€â”€ utils/                      # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ views/                      # é¡µé¢
```

### åç«¯å¼€å‘è§„èŒƒ

#### æ¥å£è®¾è®¡è§„èŒƒ
1. RESTful APIè®¾è®¡
```csharp
// èµ„æºå‘½åï¼šä½¿ç”¨åè¯å¤æ•°å½¢å¼
GET    /api/users           // è·å–ç”¨æˆ·åˆ—è¡¨
GET    /api/users/{id}      // è·å–å•ä¸ªç”¨æˆ·
POST   /api/users           // åˆ›å»ºç”¨æˆ·
PUT    /api/users/{id}      // æ›´æ–°ç”¨æˆ·
DELETE /api/users/{id}      // åˆ é™¤ç”¨æˆ·

// æŸ¥è¯¢å‚æ•°
GET /api/users?pageSize=10&pageIndex=1&keyword=admin

// å…³è”èµ„æº
GET /api/users/{id}/roles   // è·å–ç”¨æˆ·è§’è‰²
```

2. è¿”å›ç»“æœè§„èŒƒ
```csharp
// ç»Ÿä¸€è¿”å›æ ¼å¼
public class ApiResult<T>
{
    public int Code { get; set; }         // çŠ¶æ€ç 
    public string Message { get; set; }    // æ¶ˆæ¯
    public T Data { get; set; }           // æ•°æ®
    public bool Success { get; set; }      // æ˜¯å¦æˆåŠŸ
}

// åˆ†é¡µè¿”å›æ ¼å¼
public class PageResult<T>
{
    public int Total { get; set; }        // æ€»è®°å½•æ•°
    public int PageSize { get; set; }     // æ¯é¡µå¤§å°
    public int PageIndex { get; set; }    // å½“å‰é¡µç 
    public List<T> Items { get; set; }    // æ•°æ®åˆ—è¡¨
}
```

3. çŠ¶æ€ç è§„èŒƒ
```csharp
// HTTPçŠ¶æ€ç 
200 OK                // æˆåŠŸ
201 Created          // åˆ›å»ºæˆåŠŸ
204 No Content       // åˆ é™¤æˆåŠŸ
400 Bad Request      // è¯·æ±‚é”™è¯¯
401 Unauthorized     // æœªæˆæƒ
403 Forbidden        // ç¦æ­¢è®¿é—®
404 Not Found        // èµ„æºä¸å­˜åœ¨
500 Server Error     // æœåŠ¡å™¨é”™è¯¯

// ä¸šåŠ¡çŠ¶æ€ç 
public enum ApiCode
{
    Success = 200,            // æˆåŠŸ
    Unauthorized = 401,       // æœªæˆæƒ
    ParameterError = 400,     // å‚æ•°é”™è¯¯
    BusinessError = 500,      // ä¸šåŠ¡é”™è¯¯
    SystemError = 599         // ç³»ç»Ÿé”™è¯¯
}
```

#### å¼‚å¸¸å¤„ç†è§„èŒƒ
1. å¼‚å¸¸åˆ†ç±»
```csharp
// åŸºç¡€å¼‚å¸¸ç±»
public class BusinessException : Exception
{
    public int Code { get; }
    public BusinessException(string message, int code = 500) 
        : base(message)
    {
        Code = code;
    }
}

// ä¸šåŠ¡å¼‚å¸¸
public class UserNotFoundException : BusinessException
{
    public UserNotFoundException(string username) 
        : base($"ç”¨æˆ· {username} ä¸å­˜åœ¨", 404)
    {
    }
}

// æƒé™å¼‚å¸¸
public class UnauthorizedException : BusinessException
{
    public UnauthorizedException(string message = "æœªæˆæƒ") 
        : base(message, 401)
    {
    }
}
```

2. å¼‚å¸¸å¤„ç†ä¸­é—´ä»¶
```csharp
public class GlobalExceptionMiddleware
{
    private readonly RequestDelegate _next;
    private readonly ILogger<GlobalExceptionMiddleware> _logger;

    public async Task InvokeAsync(HttpContext context)
    {
        try
        {
            await _next(context);
        }
        catch (BusinessException ex)
        {
            _logger.LogWarning(ex, "ä¸šåŠ¡å¼‚å¸¸");
            await HandleExceptionAsync(context, ex);
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "ç³»ç»Ÿå¼‚å¸¸");
            await HandleExceptionAsync(context, ex);
        }
    }

    private async Task HandleExceptionAsync(HttpContext context, Exception ex)
    {
        context.Response.ContentType = "application/json";
        var response = new ApiResult<object>
        {
            Success = false,
            Code = ex is BusinessException bex ? bex.Code : 500,
            Message = ex.Message
        };
        await context.Response.WriteAsJsonAsync(response);
    }
}
```

3. å¼‚å¸¸å¤„ç†æœ€ä½³å®è·µ
```csharp
public class UserService
{
    // 1. å‚æ•°éªŒè¯
    public async Task<UserDto> CreateUser(CreateUserDto dto)
    {
        if (string.IsNullOrEmpty(dto.Username))
            throw new BusinessException("ç”¨æˆ·åä¸èƒ½ä¸ºç©º");

        if (await _userRepository.ExistsAsync(u => u.Username == dto.Username))
            throw new BusinessException("ç”¨æˆ·åå·²å­˜åœ¨");

        // å¤„ç†ä¸šåŠ¡é€»è¾‘
    }

    // 2. ä¸šåŠ¡å¼‚å¸¸
    public async Task DeleteUser(long id)
    {
        var user = await _userRepository.GetByIdAsync(id)
            ?? throw new UserNotFoundException(id.ToString());

        if (user.IsSystem)
            throw new BusinessException("ç³»ç»Ÿç”¨æˆ·ä¸èƒ½åˆ é™¤");

        // å¤„ç†åˆ é™¤é€»è¾‘
    }

    // 3. æƒé™éªŒè¯
    public async Task<UserDto> UpdateUser(UpdateUserDto dto)
    {
        if (!await _permissionChecker.HasPermissionAsync("user.update"))
            throw new UnauthorizedException();

        // å¤„ç†æ›´æ–°é€»è¾‘
    }
}
```

4. æ—¥å¿—è®°å½•è§„èŒƒ
```csharp
public class UserService
{
    private readonly ILogger<UserService> _logger;

    public async Task<UserDto> CreateUser(CreateUserDto dto)
    {
        try
        {
            _logger.LogInformation("å¼€å§‹åˆ›å»ºç”¨æˆ·: {@Dto}", dto);
            
            var user = await _userRepository.CreateAsync(dto);
            
            _logger.LogInformation("ç”¨æˆ·åˆ›å»ºæˆåŠŸ: {@User}", user);
            return user;
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "åˆ›å»ºç”¨æˆ·å¤±è´¥: {@Dto}", dto);
            throw;
        }
    }
}
```

#### æ•°æ®åº“è®¾è®¡è§„èŒƒ

1. è¡¨è®¾è®¡è§„èŒƒ
```sql
-- åŸºç¡€å­—æ®µ
id              BIGINT        PRIMARY KEY IDENTITY(1,1), -- ä¸»é”®
tenant_id       BIGINT        NOT NULL,                  -- ç§Ÿæˆ·ID
create_time     DATETIME      NOT NULL,                  -- åˆ›å»ºæ—¶é—´
create_by       BIGINT        NOT NULL,                  -- åˆ›å»ºäºº
update_time     DATETIME      NULL,                      -- æ›´æ–°æ—¶é—´
update_by       BIGINT        NULL,                      -- æ›´æ–°äºº
delete_time     DATETIME      NULL,                      -- åˆ é™¤æ—¶é—´
delete_by       BIGINT        NULL,                      -- åˆ é™¤äºº
is_deleted      INT           NOT NULL DEFAULT 0         -- åˆ é™¤æ ‡è®°
```

2. å‘½åè§„èŒƒ
```sql
-- è¡¨å‘½åï¼šlean_æ¨¡å—å_è¡¨åï¼Œå…¨éƒ¨å°å†™ï¼Œä¸‹åˆ’çº¿åˆ†éš”
lean_sys_user           -- ç³»ç»Ÿç”¨æˆ·è¡¨
lean_sys_role          -- ç³»ç»Ÿè§’è‰²è¡¨
lean_sys_menu          -- ç³»ç»Ÿèœå•è¡¨

-- å­—æ®µå‘½åï¼šå°å†™ï¼Œä¸‹åˆ’çº¿åˆ†éš”
user_name              -- ç”¨æˆ·å
create_time            -- åˆ›å»ºæ—¶é—´
is_deleted            -- åˆ é™¤æ ‡è®°

-- ç´¢å¼•å‘½å
idx_è¡¨å_å­—æ®µå        -- æ™®é€šç´¢å¼•
udx_è¡¨å_å­—æ®µå        -- å”¯ä¸€ç´¢å¼•
```

3. å­—æ®µç±»å‹è§„èŒƒ
```sql
-- å­—ç¬¦ä¸²ç±»å‹
name            VARCHAR(50)     -- ä¸€èˆ¬æ–‡æœ¬
description     NVARCHAR(500)   -- åŒ…å«ä¸­æ–‡çš„æ–‡æœ¬
content         TEXT           -- é•¿æ–‡æœ¬

-- æ•°å€¼ç±»å‹
id              BIGINT         -- ä¸»é”®ã€å¤–é”®
age             INT            -- ä¸€èˆ¬æ•°å€¼
status          TINYINT        -- çŠ¶æ€æ ‡è®°
amount          DECIMAL(18,5)  -- é‡‘é¢
rate            DECIMAL(18,5)  -- æ¯”ä¾‹

-- æ—¥æœŸæ—¶é—´ç±»å‹
create_time     DATETIME       -- åˆ›å»ºæ—¶é—´
expire_date     DATE           -- æ—¥æœŸ
```

4. ç´¢å¼•è§„èŒƒ
```sql
-- ä¸»é”®ç´¢å¼•
PRIMARY KEY (id)

-- å”¯ä¸€ç´¢å¼•
CREATE UNIQUE INDEX udx_user_username ON lean_sys_user (username)

-- æ™®é€šç´¢å¼•
CREATE INDEX idx_user_status ON lean_sys_user (status)

-- ç»„åˆç´¢å¼•
CREATE INDEX idx_user_name_status ON lean_sys_user (name, status)
```

5. SqlSugarå®ä½“æ˜ å°„
```csharp
[SugarTable("lean_sys_user", "ç³»ç»Ÿç”¨æˆ·è¡¨")]
public class LeanUser : LeanEntity
{
    /// <summary>
    /// ç”¨æˆ·å
    /// </summary>
    [SugarColumn(ColumnName = "user_name", ColumnDescription = "ç”¨æˆ·å", 
        Length = 50, IsNullable = false, ColumnDataType = "nvarchar")]
    public string UserName { get; set; }

    /// <summary>
    /// å¯†ç 
    /// </summary>
    [SugarColumn(ColumnName = "password", ColumnDescription = "å¯†ç ", 
        Length = 100, IsNullable = false, ColumnDataType = "varchar")]
    public string Password { get; set; }

    /// <summary>
    /// çŠ¶æ€
    /// </summary>
    [SugarColumn(ColumnName = "status", ColumnDescription = "çŠ¶æ€", 
        IsNullable = false, DefaultValue = "1")]
    public int Status { get; set; }
}
```

#### ç¼“å­˜ä½¿ç”¨è§„èŒƒ

1. ç¼“å­˜é”®å‘½åè§„èŒƒ
```csharp
// ç¼“å­˜é”®å‰ç¼€
public static class CacheKeys
{
    // æ¨¡å—å:å®ä½“å:æ“ä½œ:å‚æ•°
    public const string UserInfo = "sys:user:info:{0}";        // ç”¨æˆ·ä¿¡æ¯
    public const string UserToken = "sys:user:token:{0}";      // ç”¨æˆ·ä»¤ç‰Œ
    public const string RolePermissions = "sys:role:perms:{0}"; // è§’è‰²æƒé™
}

// ä½¿ç”¨ç¤ºä¾‹
string cacheKey = string.Format(CacheKeys.UserInfo, userId);
```

2. ç¼“å­˜æ¥å£å®šä¹‰
```csharp
public interface ICacheService
{
    // è·å–ç¼“å­˜
    Task<T> GetAsync<T>(string key);
    
    // è®¾ç½®ç¼“å­˜
    Task SetAsync<T>(string key, T value, TimeSpan? expiry = null);
    
    // åˆ é™¤ç¼“å­˜
    Task RemoveAsync(string key);
    
    // æ‰¹é‡åˆ é™¤ç¼“å­˜
    Task RemoveByPrefixAsync(string prefix);
    
    // è®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´
    Task SetExpiryAsync(string key, TimeSpan expiry);
}
```

3. Redisç¼“å­˜å®ç°
```csharp
public class RedisCacheService : ICacheService
{
    private readonly IConnectionMultiplexer _redis;
    private readonly ILogger<RedisCacheService> _logger;

    public async Task<T> GetAsync<T>(string key)
    {
        try
        {
            var db = _redis.GetDatabase();
            var value = await db.StringGetAsync(key);
            return value.HasValue 
                ? JsonSerializer.Deserialize<T>(value) 
                : default;
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Redisè·å–ç¼“å­˜å¤±è´¥: {Key}", key);
            return default;
        }
    }

    public async Task SetAsync<T>(string key, T value, TimeSpan? expiry = null)
    {
        try
        {
            var db = _redis.GetDatabase();
            var json = JsonSerializer.Serialize(value);
            await db.StringSetAsync(key, json, expiry);
        }
        catch (Exception ex)
        {
            _logger.LogError(ex, "Redisè®¾ç½®ç¼“å­˜å¤±è´¥: {Key}", key);
            throw;
        }
    }
}
```

4. ç¼“å­˜æœ€ä½³å®è·µ
```csharp
public class UserService
{
    private readonly ICacheService _cache;
    private readonly IUserRepository _userRepository;

    // 1. ç¼“å­˜è¯»å–
    public async Task<UserDto> GetUserAsync(long id)
    {
        var cacheKey = string.Format(CacheKeys.UserInfo, id);
        
        // å…ˆä»ç¼“å­˜è¯»å–
        var user = await _cache.GetAsync<UserDto>(cacheKey);
        if (user != null)
            return user;

        // ç¼“å­˜ä¸å­˜åœ¨ï¼Œä»æ•°æ®åº“è¯»å–
        user = await _userRepository.GetByIdAsync(id);
        if (user == null)
            return null;

        // å†™å…¥ç¼“å­˜
        await _cache.SetAsync(cacheKey, user, TimeSpan.FromHours(1));
        return user;
    }

    // 2. ç¼“å­˜æ›´æ–°
    public async Task UpdateUserAsync(UserDto dto)
    {
        // æ›´æ–°æ•°æ®åº“
        await _userRepository.UpdateAsync(dto);

        // æ›´æ–°ç¼“å­˜
        var cacheKey = string.Format(CacheKeys.UserInfo, dto.Id);
        await _cache.SetAsync(cacheKey, dto, TimeSpan.FromHours(1));
    }

    // 3. ç¼“å­˜åˆ é™¤
    public async Task DeleteUserAsync(long id)
    {
        // åˆ é™¤æ•°æ®åº“
        await _userRepository.DeleteAsync(id);

        // åˆ é™¤ç¼“å­˜
        var cacheKey = string.Format(CacheKeys.UserInfo, id);
        await _cache.RemoveAsync(cacheKey);
    }
}
```

5. ç¼“å­˜æ³¨æ„äº‹é¡¹
```csharp
public class CacheService
{
    // 1. é˜²æ­¢ç¼“å­˜ç©¿é€
    public async Task<UserDto> GetUser(long id)
    {
        var cacheKey = string.Format(CacheKeys.UserInfo, id);
        
        // ä½¿ç”¨ç©ºå¯¹è±¡ç¼“å­˜
        var user = await _cache.GetAsync<UserDto>(cacheKey);
        if (user != null)
            return user.Id == 0 ? null : user;

        user = await _userRepository.GetByIdAsync(id);
        
        // å³ä½¿ä¸ºnullä¹Ÿç¼“å­˜ï¼Œä½†è¿‡æœŸæ—¶é—´è¾ƒçŸ­
        await _cache.SetAsync(cacheKey, user ?? new UserDto(), 
            user == null ? TimeSpan.FromMinutes(5) : TimeSpan.FromHours(1));
            
        return user;
    }

    // 2. é˜²æ­¢ç¼“å­˜é›ªå´©
    public async Task<UserDto> GetUserWithSlidingExpiry(long id)
    {
        var cacheKey = string.Format(CacheKeys.UserInfo, id);
        
        var user = await _cache.GetAsync<UserDto>(cacheKey);
        if (user != null)
        {
            // æ»‘åŠ¨è¿‡æœŸ
            await _cache.SetExpiryAsync(cacheKey, TimeSpan.FromHours(1));
            return user;
        }

        // éšæœºè¿‡æœŸæ—¶é—´ï¼Œé¿å…åŒæ—¶è¿‡æœŸ
        var random = new Random();
        var expiry = TimeSpan.FromMinutes(55 + random.Next(10));
        
        user = await _userRepository.GetByIdAsync(id);
        await _cache.SetAsync(cacheKey, user, expiry);
        
        return user;
    }

    // 3. é˜²æ­¢ç¼“å­˜å‡»ç©¿
    private static readonly SemaphoreSlim _lock = new(1, 1);
    
    public async Task<UserDto> GetUserWithLock(long id)
    {
        var cacheKey = string.Format(CacheKeys.UserInfo, id);
        
        var user = await _cache.GetAsync<UserDto>(cacheKey);
        if (user != null)
            return user;

        try
        {
            await _lock.WaitAsync();
            
            // åŒé‡æ£€æŸ¥
            user = await _cache.GetAsync<UserDto>(cacheKey);
            if (user != null)
                return user;

            user = await _userRepository.GetByIdAsync(id);
            await _cache.SetAsync(cacheKey, user, TimeSpan.FromHours(1));
            
            return user;
        }
        finally
        {
            _lock.Release();
        }
    }
}
```

### å‰ç«¯å¼€å‘è§„èŒƒ

#### ç»„ä»¶å¼€å‘è§„èŒƒ

1. ç»„ä»¶å‘½å
```typescript
// ç»„ä»¶åä½¿ç”¨ PascalCase
export default defineComponent({
  name: 'UserList'  // å¿…é¡»ä¸æ–‡ä»¶ååŒ¹é…
})

// åŸºç¡€ç»„ä»¶ä½¿ç”¨ Base å‰ç¼€
export default defineComponent({
  name: 'BaseButton'
})

// å•ä¾‹ç»„ä»¶ä½¿ç”¨ The å‰ç¼€
export default defineComponent({
  name: 'TheHeader'
})
```

2. ç»„ä»¶æ–‡ä»¶ç»“æ„
```vue
<script setup lang="ts">
// ç±»å‹å¯¼å…¥
import type { UserInfo } from '@/types'

// ç»„ä»¶å¯¼å…¥
import { BaseTable, BaseForm } from '@/components'

// å±æ€§å®šä¹‰
interface Props {
  userId: number
  mode?: 'view' | 'edit'
}
const props = withDefaults(defineProps<Props>(), {
  mode: 'view'
})

// äº‹ä»¶å®šä¹‰
const emit = defineEmits<{
  (e: 'save', user: UserInfo): void
  (e: 'cancel'): void
}>()

// å“åº”å¼æ•°æ®
const loading = ref(false)
const userInfo = ref<UserInfo>()

// ç”Ÿå‘½å‘¨æœŸ
onMounted(async () => {
  await loadData()
})

// æ–¹æ³•å®šä¹‰
async function loadData() {
  loading.value = true
  try {
    userInfo.value = await getUserById(props.userId)
  } finally {
    loading.value = false
  }
}
</script>

<template>
  <div class="user-detail">
    <a-card :loading="loading">
      <BaseForm
        v-if="userInfo"
        v-model:value="userInfo"
        :readonly="props.mode === 'view'"
        @save="$emit('save', $event)"
        @cancel="$emit('cancel')"
      />
    </a-card>
  </div>
</template>

<style lang="less" scoped>
.user-detail {
  @apply p-6 bg-white rounded-lg;
}
</style>

3. ç»„ä»¶é€šä¿¡è§„èŒƒ
```typescript
// Props å®šä¹‰
interface Props {
  // å¿…å¡«å±æ€§
  userId: number
  // å¯é€‰å±æ€§ï¼Œå¸¦é»˜è®¤å€¼
  mode?: 'view' | 'edit'
  // å›è°ƒå‡½æ•°
  onSave?: (user: UserInfo) => void
}

// Emits å®šä¹‰
const emit = defineEmits<{
  // å¸¦å‚æ•°çš„äº‹ä»¶
  (e: 'save', user: UserInfo): void
  // æ— å‚æ•°çš„äº‹ä»¶
  (e: 'cancel'): void
}>()

// äº‹ä»¶å¤„ç†
const handleSave = (user: UserInfo) => {
  emit('save', user)
}
```

#### çŠ¶æ€ç®¡ç†è§„èŒƒ

1. Store å®šä¹‰
```typescript
// store/modules/user.ts
import { defineStore } from 'pinia'
import type { UserInfo } from '@/types'

export const useUserStore = defineStore('user', {
  // çŠ¶æ€å®šä¹‰
  state: () => ({
    userInfo: null as UserInfo | null,
    permissions: [] as string[],
    token: '',
  }),

  // è®¡ç®—å±æ€§
  getters: {
    isAdmin(): boolean {
      return this.permissions.includes('admin')
    },
    hasPermission: (state) => {
      return (permission: string) => state.permissions.includes(permission)
    }
  },

  // å¼‚æ­¥æ“ä½œ
  actions: {
    async login(username: string, password: string) {
      try {
        const { token, user } = await userApi.login({ username, password })
        this.setToken(token)
        this.setUserInfo(user)
        return true
      } catch (error) {
        return false
      }
    },

    async logout() {
      this.clearUserInfo()
      this.clearToken()
    },
  },

  // æŒä¹…åŒ–é…ç½®
  persist: {
    key: 'user-store',
    paths: ['token']
  }
})
```

2. Store ä½¿ç”¨è§„èŒƒ
```typescript
// ç»„ä»¶ä¸­ä½¿ç”¨
const userStore = useUserStore()

// è¯»å–çŠ¶æ€
const userInfo = computed(() => userStore.userInfo)

// ä¿®æ”¹çŠ¶æ€
userStore.$patch({
  userInfo: {
    ...userStore.userInfo,
    name: 'New Name'
  }
})

// è°ƒç”¨ action
await userStore.login(username, password)

// æ‰¹é‡ä¿®æ”¹
userStore.$patch((state) => {
  state.userInfo = null
  state.permissions = []
})
```

#### è·¯ç”±ç®¡ç†è§„èŒƒ

1. è·¯ç”±é…ç½®
```typescript
// router/index.ts
import type { RouteRecordRaw } from 'vue-router'

const routes: RouteRecordRaw[] = [
  {
    path: '/',
    component: Layout,
    redirect: '/dashboard',
    children: [
      {
        path: 'dashboard',
        name: 'Dashboard',
        component: () => import('@/views/dashboard/index.vue'),
        meta: {
          title: 'ä»ªè¡¨ç›˜',
          icon: 'dashboard',
          affix: true
        }
      }
    ]
  },
  {
    path: '/user',
    component: Layout,
    meta: {
      title: 'ç”¨æˆ·ç®¡ç†',
      icon: 'user',
      permissions: ['user.view']
    },
    children: [
      {
        path: 'list',
        name: 'UserList',
        component: () => import('@/views/user/list.vue'),
        meta: {
          title: 'ç”¨æˆ·åˆ—è¡¨',
          keepAlive: true
        }
      }
    ]
  }
]
```

2. è·¯ç”±å®ˆå«
```typescript
// router/guards.ts
import type { Router } from 'vue-router'

export function setupRouterGuards(router: Router) {
  // æƒé™å®ˆå«
  router.beforeEach(async (to, from, next) => {
    const userStore = useUserStore()
    
    // æ£€æŸ¥token
    if (!userStore.token && to.name !== 'Login') {
      next({ name: 'Login' })
      return
    }

    // æ£€æŸ¥æƒé™
    if (to.meta?.permissions) {
      const hasPermission = userStore.hasPermissions(to.meta.permissions)
      if (!hasPermission) {
        next({ name: '403' })
        return
      }
    }

    next()
  })

  // è¿›åº¦æ¡
  router.beforeEach(() => {
    NProgress.start()
  })

  router.afterEach(() => {
    NProgress.done()
  })
}
```

3. è·¯ç”±è·³è½¬
```typescript
// å£°æ˜å¼å¯¼èˆª
<router-link :to="{ name: 'UserDetail', params: { id: 1 } }">
  ç”¨æˆ·è¯¦æƒ…
</router-link>

// ç¼–ç¨‹å¼å¯¼èˆª
const router = useRouter()
const route = useRoute()

// å¸¦å‚æ•°è·³è½¬
router.push({
  name: 'UserDetail',
  params: { id: 1 },
  query: { tab: 'info' }
})

// è¿”å›ä¸Šä¸€é¡µ
router.back()

// æ›¿æ¢å½“å‰é¡µé¢
router.replace({
  name: 'UserList'
})
```

#### UI/UXè®¾è®¡è§„èŒƒ

1. å¸ƒå±€è§„èŒƒ
```vue
<!-- é¡µé¢å¸ƒå±€ -->
<template>
  <div class="page-container">
    <!-- é¡µå¤´ -->
    <div class="page-header">
      <h1 class="page-title">{{ title }}</h1>
      <div class="page-actions">
        <a-button type="primary" @click="handleAdd">æ–°å¢</a-button>
      </div>
    </div>

    <!-- æœç´¢åŒºåŸŸ -->
    <div class="search-bar">
      <a-form layout="inline">
        <!-- æœç´¢è¡¨å•é¡¹ -->
      </a-form>
    </div>

    <!-- å†…å®¹åŒºåŸŸ -->
    <div class="page-content">
      <a-table :columns="columns" :data-source="dataSource">
        <!-- è¡¨æ ¼å†…å®¹ -->
      </a-table>
    </div>

    <!-- é¡µè„š -->
    <div class="page-footer">
      <!-- åˆ†é¡µç­‰ -->
    </div>
  </div>
</template>

<style lang="less" scoped>
.page-container {
  @apply flex flex-col min-h-full p-6 bg-white;

  .page-header {
    @apply flex justify-between items-center mb-6;
  }

  .page-title {
    @apply text-xl font-bold;
  }

  .search-bar {
    @apply mb-6;
  }

  .page-content {
    @apply flex-1;
  }

  .page-footer {
    @apply mt-6;
  }
}
</style>
```

2. å“åº”å¼è®¾è®¡
```vue
<template>
  <a-row :gutter="{ xs: 8, sm: 16, md: 24 }">
    <a-col :xs="24" :sm="12" :md="8" :lg="6">
      <a-card>å†…å®¹1</a-card>
    </a-col>
  </a-row>
</template>

<style lang="less" scoped>
.responsive-container {
  @apply w-full;

  @screen sm {
    @apply max-w-screen-sm;
  }

  @screen md {
    @apply max-w-screen-md;
  }

  @screen lg {
    @apply max-w-screen-lg;
  }
}
</style>
```

3. ä¸»é¢˜å®šåˆ¶
```typescript
// å®šåˆ¶ Ant Design Vue ä¸»é¢˜
export default {
  theme: {
    token: {
      colorPrimary: '#1890ff',
      borderRadius: 4,
      colorSuccess: '#52c41a',
      colorWarning: '#faad14',
      colorError: '#f5222d',
    }
  }
}

// ä½¿ç”¨CSSå˜é‡
:root {
  --primary-color: #1890ff;
  --success-color: #52c41a;
  --warning-color: #faad14;
  --error-color: #f5222d;
}

.custom-component {
  color: var(--primary-color);
}
```

#### æ€§èƒ½ä¼˜åŒ–è§„èŒƒ

1. ä»£ç åˆ†å‰²
```typescript
// è·¯ç”±æ‡’åŠ è½½
const routes = [
  {
    path: '/user',
    component: () => import('@/views/user/index.vue')
  }
]

// ç»„ä»¶æ‡’åŠ è½½
const MyComponent = defineAsyncComponent(() =>
  import('@/components/MyComponent.vue')
)
```

2. è™šæ‹Ÿåˆ—è¡¨
```vue
<template>
  <VirtualList
    :data-key="'id'"
    :data-source="list"
    :item-height="54"
    :container-height="400"
  >
    <template #item="{ item }">
      <div class="list-item">
        {{ item.name }}
      </div>
    </template>
  </VirtualList>
</template>
```

3. å›¾ç‰‡ä¼˜åŒ–
```vue
<template>
  <!-- æ‡’åŠ è½½å›¾ç‰‡ -->
  <img
    v-lazy="imageUrl"
    :alt="description"
    class="lazy-image"
  >

  <!-- ä½¿ç”¨webpæ ¼å¼ -->
  <picture>
    <source :srcset="imageWebp" type="image/webp">
    <img :src="imageJpg" :alt="description">
  </picture>
</template>
```

4. ç¼“å­˜ä¼˜åŒ–
```typescript
// é¡µé¢ç¼“å­˜
<keep-alive :include="['UserList', 'UserDetail']">
  <router-view />
</keep-alive>

// APIç¼“å­˜
const useUserList = createFetch({
  baseUrl: '/api',
  options: {
    immediate: true,
    refetch: false,
    cache: true,
    cacheTime: 1000 * 60 * 5 // 5åˆ†é’Ÿ
  }
})
```

#### å®‰å…¨è§„èŒƒ

1. XSSé˜²æŠ¤
```typescript
// ä½¿ç”¨ v-html æ—¶æ³¨æ„è½¬ä¹‰
import { escapeHtml } from '@/utils/security'

const html = ref(escapeHtml(rawHtml))

<div v-html="html"></div>
```

2. CSRFé˜²æŠ¤
```typescript
// è¯·æ±‚æ‹¦æˆªå™¨æ·»åŠ token
axios.interceptors.request.use(config => {
  const token = useUserStore().token
  if (token) {
    config.headers['X-CSRF-TOKEN'] = token
  }
  return config
})
```

3. æ•æ„Ÿä¿¡æ¯å¤„ç†
```typescript
// å¯†ç åŠ å¯†
import { encrypt } from '@/utils/crypto'

const handleLogin = async () => {
  const encryptedPassword = encrypt(password.value)
  await login(username.value, encryptedPassword)
}

// æœ¬åœ°å­˜å‚¨
const storage = {
  set(key: string, value: any) {
    if (typeof value === 'object') {
      value = JSON.stringify(value)
    }
    localStorage.setItem(key, value)
  },
  get(key: string) {
    const value = localStorage.getItem(key)
    try {
      return JSON.parse(value!)
    } catch {
      return value
    }
  },
  remove(key: string) {
    localStorage.removeItem(key)
  }
}
```

### å·¥ç¨‹åŒ–è§„èŒƒ

#### CI/CDè§„èŒƒ

1. æŒç»­é›†æˆæµç¨‹
```yaml
# .github/workflows/ci.yml
name: CI

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main, develop ]

jobs:
  build:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    # åç«¯æ„å»º
    - name: Setup .NET
      uses: actions/setup-dotnet@v3
      with:
        dotnet-version: 8.0.x
        
    - name: Restore dependencies
      run: dotnet restore
      
    - name: Build
      run: dotnet build --no-restore
      
    - name: Test
      run: dotnet test --no-build --verbosity normal
      
    # å‰ç«¯æ„å»º
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        
    - name: Install dependencies
      run: pnpm install
      
    - name: Lint
      run: pnpm lint
      
    - name: Build
      run: pnpm build
```

2. æŒç»­éƒ¨ç½²æµç¨‹
```yaml
# .github/workflows/cd.yml
name: CD

on:
  push:
    tags:
      - 'v*'

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
    # æ„å»ºDockeré•œåƒ
    - name: Build and push Docker images
      uses: docker/build-push-action@v4
      with:
        context: .
        push: true
        tags: |
          lean365/lean.cus:latest
          lean365/lean.cus:${{ github.ref_name }}
          
    # éƒ¨ç½²åˆ°æœåŠ¡å™¨
    - name: Deploy to server
      uses: appleboy/ssh-action@master
      with:
        host: ${{ secrets.SERVER_HOST }}
        username: ${{ secrets.SERVER_USERNAME }}
        key: ${{ secrets.SERVER_KEY }}
        script: |
          cd /app/lean.cus
          docker-compose pull
          docker-compose up -d
```

#### ç¯å¢ƒç®¡ç†è§„èŒƒ

1. ç¯å¢ƒåˆ†ç±»
```bash
# ç¯å¢ƒç±»å‹
development  # å¼€å‘ç¯å¢ƒ
test         # æµ‹è¯•ç¯å¢ƒ
staging      # é¢„å‘å¸ƒç¯å¢ƒ
production   # ç”Ÿäº§ç¯å¢ƒ
```

2. ç¯å¢ƒé…ç½®
```json
// appsettings.json
{
  "Env": "development",
  "ConnectionStrings": {
    "Default": "Server=localhost;Database=lean_cus;Uid=root;Pwd=123456;"
  },
  "Redis": {
    "ConnectionString": "localhost:6379",
    "DatabaseId": 0
  },
  "Jwt": {
    "SecretKey": "your-secret-key",
    "Issuer": "lean.cus",
    "Audience": "lean.cus",
    "ExpireMinutes": 120
  }
}

// .env
VITE_ENV=development
VITE_API_URL=http://localhost:5000
VITE_UPLOAD_URL=http://localhost:5000/upload
```

3. ç¯å¢ƒéš”ç¦»
```typescript
// å‰ç«¯ç¯å¢ƒéš”ç¦»
const config = {
  development: {
    apiUrl: 'http://localhost:5000',
    uploadUrl: 'http://localhost:5000/upload'
  },
  test: {
    apiUrl: 'http://test-api.lean365.com',
    uploadUrl: 'http://test-api.lean365.com/upload'
  },
  production: {
    apiUrl: 'https://api.lean365.com',
    uploadUrl: 'https://api.lean365.com/upload'
  }
}

export default config[import.meta.env.VITE_ENV]
```

#### ç‰ˆæœ¬å‘å¸ƒè§„èŒƒ

1. ç‰ˆæœ¬å·è§„èŒƒ
```bash
# ç‰ˆæœ¬å·æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·
1.0.0   # åˆå§‹ç‰ˆæœ¬
1.1.0   # æ–°åŠŸèƒ½ç‰ˆæœ¬
1.1.1   # é—®é¢˜ä¿®å¤ç‰ˆæœ¬
2.0.0   # é‡å¤§æ›´æ–°ç‰ˆæœ¬
```

2. å‘å¸ƒæµç¨‹
```bash
# 1. åˆ›å»ºå‘å¸ƒåˆ†æ”¯
git checkout -b release/v1.1.0 develop

# 2. æ›´æ–°ç‰ˆæœ¬å·
ä¿®æ”¹ package.json å’Œ Directory.Build.props ä¸­çš„ç‰ˆæœ¬å·

# 3. æ›´æ–°æ›´æ–°æ—¥å¿—
æ›´æ–° CHANGELOG.md

# 4. æäº¤æ›´æ”¹
git add .
git commit -m "chore(release): v1.1.0"

# 5. åˆå¹¶åˆ°ä¸»åˆ†æ”¯
git checkout main
git merge --no-ff release/v1.1.0

# 6. æ‰“æ ‡ç­¾
git tag -a v1.1.0 -m "version 1.1.0"

# 7. æ¨é€åˆ°è¿œç¨‹
git push origin main
git push origin v1.1.0

# 8. åˆå¹¶å›å¼€å‘åˆ†æ”¯
git checkout develop
git merge --no-ff release/v1.1.0

# 9. åˆ é™¤å‘å¸ƒåˆ†æ”¯
git branch -d release/v1.1.0
```

3. æ›´æ–°æ—¥å¿—è§„èŒƒ
```markdown
# æ›´æ–°æ—¥å¿—

## [1.1.0] - 2024-01-15

### æ–°å¢
- ç”¨æˆ·ç®¡ç†æ¨¡å—
- è§’è‰²æƒé™ç®¡ç†
- æ•°æ®å­—å…¸åŠŸèƒ½

### ä¼˜åŒ–
- æå‡æŸ¥è¯¢æ€§èƒ½
- ä¼˜åŒ–é¡µé¢åŠ è½½é€Ÿåº¦
- æ”¹è¿›ç”¨æˆ·ä½“éªŒ

### ä¿®å¤
- ä¿®å¤ç™»å½•å¤±è´¥é—®é¢˜
- ä¿®å¤æ•°æ®å¯¼å‡ºé”™è¯¯
- ä¿®å¤IEæµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜
```

#### ç›‘æ§å‘Šè­¦è§„èŒƒ

1. æ—¥å¿—ç›‘æ§
```csharp
// æ—¥å¿—é…ç½®
{
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "File",
        "Args": {
          "path": "logs/log-.txt",
          "rollingInterval": "Day"
        }
      },
      {
        "Name": "Elasticsearch",
        "Args": {
          "nodeUris": "http://localhost:9200",
          "indexFormat": "lean-cus-logs-{0:yyyy.MM}"
        }
      }
    ]
  }
}

// æ—¥å¿—è®°å½•
public class LogService
{
    private readonly ILogger<LogService> _logger;

    public void LogOperation(string operation, string userId, string details)
    {
        _logger.LogInformation(
            "æ“ä½œæ—¥å¿— - æ“ä½œ:{Operation} ç”¨æˆ·:{UserId} è¯¦æƒ…:{Details}",
            operation, userId, details);
    }

    public void LogError(Exception ex, string context)
    {
        _logger.LogError(
            ex,
            "é”™è¯¯æ—¥å¿— - ä¸Šä¸‹æ–‡:{Context} æ¶ˆæ¯:{Message}",
            context, ex.Message);
    }
}
```

2. æ€§èƒ½ç›‘æ§
```csharp
// æ€§èƒ½è®¡æ•°å™¨
public class PerformanceMonitor
{
    private readonly ILogger<PerformanceMonitor> _logger;
    private readonly Metrics _metrics;

    public void RecordDuration(string operation, long milliseconds)
    {
        _metrics.Measure.Histogram.Update(
            "operation_duration",
            milliseconds,
            new MetricTags("operation", operation)
        );
    }

    public void RecordError(string operation)
    {
        _metrics.Measure.Counter.Increment(
            "operation_errors",
            new MetricTags("operation", operation)
        );
    }
}

// ä½¿ç”¨ç¤ºä¾‹
public async Task<UserDto> GetUserAsync(long id)
{
    var sw = Stopwatch.StartNew();
    try
    {
        var user = await _userRepository.GetByIdAsync(id);
        _monitor.RecordDuration("get_user", sw.ElapsedMilliseconds);
        return user;
    }
    catch (Exception)
    {
        _monitor.RecordError("get_user");
        throw;
    }
}
```

3. å‘Šè­¦é…ç½®
```yaml
# prometheuså‘Šè­¦è§„åˆ™
groups:
- name: lean-cus-alerts
  rules:
  - alert: HighErrorRate
    expr: rate(operation_errors_total[5m]) > 0.1
    for: 5m
    labels:
      severity: critical
    annotations:
      summary: "é”™è¯¯ç‡è¿‡é«˜"
      description: "æœ€è¿‘5åˆ†é’Ÿé”™è¯¯ç‡è¶…è¿‡10%"

  - alert: SlowResponses
    expr: histogram_quantile(0.95, rate(operation_duration_bucket[5m])) > 1000
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "å“åº”æ—¶é—´è¿‡é•¿"
      description: "95%è¯·æ±‚å“åº”æ—¶é—´è¶…è¿‡1ç§’"

  - alert: HighCPUUsage
    expr: rate(process_cpu_seconds_total[5m]) * 100 > 80
    for: 5m
    labels:
      severity: warning
    annotations:
      summary: "CPUä½¿ç”¨ç‡è¿‡é«˜"
      description: "CPUä½¿ç”¨ç‡è¶…è¿‡80%"
```

4. ç›‘æ§é¢æ¿
```typescript
// å‰ç«¯ç›‘æ§é¢æ¿
const MonitorDashboard = defineComponent({
  setup() {
    const metrics = ref({
      errorRate: 0,
      responseTime: 0,
      cpuUsage: 0,
      memoryUsage: 0
    })

    // è·å–ç›‘æ§æ•°æ®
    const fetchMetrics = async () => {
      const data = await monitorApi.getMetrics()
      metrics.value = data
    }

    // å®šæ—¶åˆ·æ–°
    onMounted(() => {
      fetchMetrics()
      setInterval(fetchMetrics, 60000)
    })

    return () => (
      <div class="monitor-dashboard">
        <a-row gutter={16}>
          <a-col span={6}>
            <a-card>
              <statistic
                title="é”™è¯¯ç‡"
                value={metrics.value.errorRate}
                suffix="%"
                valueStyle={metrics.value.errorRate > 10 ? { color: '#cf1322' } : {}}
              />
            </a-card>
          </a-col>
          <a-col span={6}>
            <a-card>
              <statistic
                title="å“åº”æ—¶é—´"
                value={metrics.value.responseTime}
                suffix="ms"
                valueStyle={metrics.value.responseTime > 1000 ? { color: '#cf1322' } : {}}
              />
            </a-card>
          </a-col>
          <a-col span={6}>
            <a-card>
              <statistic
                title="CPUä½¿ç”¨ç‡"
                value={metrics.value.cpuUsage}
                suffix="%"
                valueStyle={metrics.value.cpuUsage > 80 ? { color: '#cf1322' } : {}}
              />
            </a-card>
          </a-col>
          <a-col span={6}>
            <a-card>
              <statistic
                title="å†…å­˜ä½¿ç”¨ç‡"
                value={metrics.value.memoryUsage}
                suffix="%"
                valueStyle={metrics.value.memoryUsage > 80 ? { color: '#cf1322' } : {}}
              />
            </a-card>
          </a-col>
        </a-row>
      </div>
    )
  }
})
```

// ... ç»§ç»­æ·»åŠ å…¶ä»–è§„èŒƒ ... 